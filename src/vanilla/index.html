<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">

    <meta description="">
    <link rel="stylesheet" type="text/css" href="../../style.css">

    <script>
      "use strict";

      document.addEventListener('DOMContentLoaded', function(e){
        fetch('https://raw.githubusercontent.com/iOiurson/formation/correction/data/tweets.json')
        .then(function(resp){return resp.json()})
        .then(function(tweets){
          console.log('Le tableau de tweet', tweets);

		  

          
          
/*

Pense-bête DOM
  // créer un nouvel élément 'div'
  var x = document.createElement('div');

  // rajouter un enfant
  parentEl.append(enfantEl);

  // accéder au <body>
  document.body

  // ajouter un texte à un élément
  element.textContent = 'le texte yo !';

*/

// ### 1/ Manipulations de base ###

          /* pour le premier tweet
            - l'afficher dans la console
			console.log('Mon Premier Tweet', tweets[0]);

            - afficher son texte dans la console
            console.log('Mon Premier Tweet', tweets[0].text);

            - créer une div qui contient le texte du tweet et ajouter la div au <body>
            var x = document.createElement('div');
          	x.textContent = (tweets[0].text);
          	document.body.append(x);
          */


          // afficher dans la console les text de tous les tweets du tableau en utilisant .forEach
          tweets.forEach(function(tweet,i){
          	console.log(tweet.text)
          });

          // créer un tableau avec seulement tous les textes des tweets
          let tweetsText = tweets.map(function(tweet,i){
          	return(tweet.text)
          });
          console.log(tweetsText);

          // créer un tableau avec seulement les dates de publication (created_at)
          let tweetsDate = tweets.map(function(tweet,i){
          	return(tweet.created_at)
          });
          console.log(tweetsDate);

          // créer un tableau avec seulement les tweets en français
          let tweetsFr = tweets.filter(function(tweet,i){
          	if (tweet.lang === "fr"){
          		return tweet;
          	}
          })
          console.log(tweetsFr);

          // créer un <ol>
          var ol = document.createElement('ol');

          // [1] pour chaque tweet, créer un <li>, mettre le texte dedans, mettre le <li> dans le <ol>
		  tweets.forEach(function(tweet,i){
          	var li = document.createElement('li');
          	li.textContent = tweet.text;	
          	ol.append(li);
          });	

          // mettre le <ol> dans le <body>
		  document.body.append(ol);

// ### 2/ Manipulations avancées ###

          /* créer une fonction, qui pour un objet tweet créé et retourne un <li> et l'utiliser à [1]
          (séparation de la phase de création des éléments et de composition) */


          /* [2] Créer et ajouter un <button> qui quand on clique dessus affiche 'click' dans la console.
          Quand on clique ne garde que les tweets en français (et quand on reclique re-affiche tout) */


          // Créer un bouton qui active le tracking de la position de la souris (event.clientX, event.clientY), et le désactive quand on reclique dessus


          /* Créer une fonction, qui pour un tableau tweet créé et retourne un <ol> et l'utiliser à [1] et [2]
          (séparation de la phase de création des éléments et de composition) */


          /* Créer plusieurs fichiers avec du code
            - createTweetLi.js
            - createTweetsOl.js
            - createTrackingButton.js
            - main.js
          */


          // charger tout ça via des <script defer src="..."> dans le <head>


          // Ecrire une fonction 'jsonGet' qui a comme paramètre une url et qui retourne une promesses pour des tweets en utilisant fetch


          /* charger et afficher les tweets de
          'https://raw.githubusercontent.com/iOiurson/formation/corrig%C3%A9/data/tweets.json'*/


// ### BONUS 1: LOCALSTORAGE ###
            // 1) Rajouter un bouton "fav" à chaque li


            /* 2) quand le bouton est cliqué, changer le style du li (rajouter une classe 'fav')
            + et stocker l'ensemble des id_str fav dans le localStorage */


            // 3) au chargement de la page, lire le localStorage pour favoriser les favoris.


// ### BONUS 2: TIMING EVENEMENTS ###

            /* Faites un bouton (un peu gros) qui écoute mousedown/click/dblclick et mesure le temps de click et de doubleclick
            et affiche tempsClic1, tempsClic2, tempsDoubleClic */


        })
        .catch(function(e){ console.error(e) });

      }, {once: true})
    </script>

    <title>yo</title>
  </head>

  <body>
  </body>

</html>
